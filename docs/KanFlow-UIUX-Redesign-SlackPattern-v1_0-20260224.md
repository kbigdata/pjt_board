# KanFlow - UI/UX 리디자인 명세서 (Slack 인터페이스 패턴 기반)

> **문서명**: UI/UX 리디자인 명세서 - Slack 인터페이스 패턴 기반 전면 재설계  
> **버전**: v1.0  
> **작성일**: 2026-02-24  
> **기준 문서**: KanFlow-FRD-ClaudeCode-Setup-v2.0-20260224.md, KanFlow-Additional-Features-v1.0-20260224.md  
> **벤치마크**: Slack (2025 Redesign), Linear, Notion  
> **목적**: 기존 FRD의 카드 상세 모달 중심 UI를 Slack 스타일 3패널 + 우측 슬라이드 패널 구조로 전면 재설계  

---

## 목차

1. [리디자인 배경 및 문제 분석](#1-리디자인-배경-및-문제-분석)
2. [Slack UI 패턴 분석](#2-slack-ui-패턴-분석)
3. [전체 레이아웃 아키텍처](#3-전체-레이아웃-아키텍처)
4. [내비게이션 사이드바 (1영역)](#4-내비게이션-사이드바-1영역)
5. [보드 사이드바 (2영역)](#5-보드-사이드바-2영역)
6. [메인 콘텐츠 영역 (3영역)](#6-메인-콘텐츠-영역-3영역)
7. [우측 디테일 패널 (4영역)](#7-우측-디테일-패널-4영역)
8. [스레드 패널 상세 설계](#8-스레드-패널-상세-설계)
9. [메시지 컴포저 설계](#9-메시지-컴포저-설계)
10. [호버 액션 & 인터랙션](#10-호버-액션--인터랙션)
11. [알림 및 Activity 뷰](#11-알림-및-activity-뷰)
12. [반응형 & 적응형 레이아웃](#12-반응형--적응형-레이아웃)
13. [테마 & 커스터마이징](#13-테마--커스터마이징)
14. [기존 FRD 변경 영향 분석](#14-기존-frd-변경-영향-분석)
15. [컴포넌트 트리 & 기술 설계](#15-컴포넌트-트리--기술-설계)

---

## 1. 리디자인 배경 및 문제 분석

### 1.1 기존 FRD UI의 문제점

> **근거**: 기존 FRD(§4.2)의 카드 상세 모달은 전통적인 Trello 스타일 풀스크린 모달이다. 이 패턴은 다음과 같은 실무 불편을 초래한다.

```
기존 FRD의 모달 중심 UI 문제점:

┌────────────────────────────────────────────────────────────┐
│ 문제 1: 컨텍스트 단절                                       │
│                                                             │
│  보드 뷰 → [카드 클릭] → 풀스크린 모달                       │
│                                                             │
│  • 모달이 보드 전체를 가림 → 다른 카드 확인 불가               │
│  • 카드 간 빠른 전환이 불가능 (닫기 → 다른 카드 클릭 반복)     │
│  • 보드 상태를 보면서 카드를 편집할 수 없음                    │
│                                                             │
│ 문제 2: 코멘트/스레드 접근성 부족                             │
│                                                             │
│  • 코멘트가 카드 모달 내부에 갇혀 있음                        │
│  • 스레드를 보려면 카드 → 모달 → 코멘트 탭 → 스레드 3단계     │
│  • "모든 스레드 모아보기" 기능이 없음                         │
│                                                             │
│ 문제 3: 정보 밀도 부족                                      │
│                                                             │
│  • 보드 뷰는 카드 제목+아이콘만 표시                          │
│  • 상세 정보를 보려면 반드시 모달을 열어야 함                  │
│  • 빠른 훑어보기(scanning)가 불가능                           │
│                                                             │
│ 문제 4: 내비게이션 비효율                                    │
│                                                             │
│  • 보드 간 전환: 헤더 → 보드 목록 → 선택 (3클릭)              │
│  • 워크스페이스 전환이 불편                                   │
│  • 최근 접근, 즐겨찾기 보드에 빠른 접근 경로 없음              │
└────────────────────────────────────────────────────────────┘
```

### 1.2 참조 스크린샷 분석 (첨부 이미지)

```
첨부 스크린샷 분석 (Linear + Slack Thread 패턴):

┌──── 좌측: 리스트 뷰 ──────────────┬──── 우측: 스레드 패널 ──────┐
│                                    │                              │
│ 🚀 Marketing Campaign              │ < Thread  📋 Legal approval  │
│                                    │   Comments 2  Related Thds 1│
│ [Assignments] [🔍] [⊞] [Sort 2]  │                              │
│ [Group by Owner ▾]                 │ 👤 Lee Hao  10:58 AM        │
│                                    │ Hi @lisa 👋 I initiated...  │
│ ▼ 👤 Lisa Zhang  4 items          │ #help-legal-review.          │
│                                    │ Let me know if you need      │
│ Issue    Status  Priority  Owner   │ anything else.              │
│ ─────────────────────────────────  │                              │
│ Internal kickoff  Done  🔴P0  @nat│ 👤 Lisa Zhang  11:27 AM     │
│ Finalize budget   Done    P1  @lis│ Thanks for kicking that off, │
│ Leadership review Done  🟢P2  @stu│ everything looks good!       │
│ Legal approval  Not Started 🔵P2  │   👍 1   😊                 │
│                                    │                              │
│ + Add item                         │ ┌─────────────────────┐     │
│                                    │ │ Reply...            │     │
│                                    │ │ [+] [Aa] [😊] [@] …│     │
│                                    │ └─────────────────────┘     │
└────────────────────────────────────┴──────────────────────────────┘

핵심 패턴 추출:
  1. 메인 콘텐츠(리스트) + 우측 디테일 패널(스레드) 동시 표시
  2. 스레드 패널은 메인 콘텐츠를 가리지 않고 옆에 슬라이드
  3. 코멘트에 이모지 리액션 (👍 1) 인라인 표시
  4. 코멘트 하단에 리치 컴포저 (서식, 이모지, 멘션 버튼)
  5. 스레드 헤더에 "Comments" / "Related Threads" 탭 전환
  6. 닫기 버튼 (< 뒤로) 으로 패널 접기
```

### 1.3 Slack에서 차용할 핵심 디자인 패턴

> **근거**: Slack 2025 리디자인 공식 블로그, Slack Design 아티클 "A new visual language for Slack", Slack Help Center "An overview of Slack's new design" 기반

```
Slack에서 KanFlow에 적용할 6가지 핵심 패턴:

1. 다단(Multi-column) 레이아웃
   Slack: 아이콘 사이드바 → 채널 리스트 → 메시지 영역 → 스레드 패널
   KanFlow: 내비 사이드바 → 보드 리스트 → 보드/리스트 뷰 → 디테일 패널

2. 우측 슬라이드 패널 (Right Panel)
   Slack: 스레드 클릭 시 우측에 패널 오픈, 메인 영역과 동시 표시
   KanFlow: 카드 클릭 시 풀스크린 모달 대신 우측 슬라이드 패널

3. 메시지 호버 액션 (Hover Actions)
   Slack: 메시지 위에 마우스 올리면 이모지/답글/더보기 아이콘 표시
   KanFlow: 카드/코멘트 위에 마우스 올리면 빠른 액션 툴바 표시

4. Activity 뷰 (통합 알림)
   Slack: 멘션, 스레드, 리액션, 앱 알림을 한 곳에 모아보기
   KanFlow: 내 카드 변경, 멘션, 스레드 답글, 마감 알림 통합 뷰

5. 리치 메시지 컴포저 (Rich Composer)
   Slack: 서식 바(Aa), 이모지(😊), 멘션(@), 첨부(+), 더보기(…)
   KanFlow: 코멘트 입력에 동일한 컴포저 패턴 적용

6. 접기/펼치기 섹션 (Collapsible Sections)
   Slack: 사이드바의 Channels, DMs, Apps 섹션 접기/펼치기
   KanFlow: 보드 사이드바의 즐겨찾기, 최근, 보드 목록 섹션 접기/펼치기
```

---

## 2. Slack UI 패턴 분석

### 2.1 Slack 2025 레이아웃 구조

> **근거**: Slack 공식 블로그 "A redesigned Slack, built for focus" (2023), Slack Help Center 2025년 9월 업데이트, Medium 분석 "Slack just unleashed its new UI"

```
Slack 2025 Desktop 레이아웃:

┌───┬────────────────┬───────────────────────┬──────────────────┐
│   │                │                       │                  │
│ N │   Secondary    │                       │    Right         │
│ A │   Sidebar      │    Main Content       │    Panel         │
│ V │                │                       │   (Thread)       │
│   │  Channels      │    Messages           │                  │
│ B │  DMs           │    Content            │   Thread view    │
│ A │  Apps          │                       │   Card detail    │
│ R │                │                       │   Search result  │
│   │  Sections:     │                       │                  │
│   │  ▼ Starred     │                       │   Comments       │
│   │  ▼ Channels    │                       │   Reactions      │
│   │  ▼ DMs         │                       │   Reply input    │
│   │                │                       │                  │
│ H │                │                       │                  │
│ O │                │  Message Composer     │                  │
│ M │                │  [+ Aa 😊 @ … ▶]     │   Reply Composer │
│ E │                │                       │   [+ Aa 😊 @ ▶] │
│   │                │                       │                  │
│ + │  Profile       │                       │                  │
│ 👤│                │                       │                  │
└───┴────────────────┴───────────────────────┴──────────────────┘
 48px    260px            flexible               400px (토글)

Slack 핵심 레이아웃 원칙:
  1. Primary Nav (48px): 고정 아이콘, Home/DMs/Activity/More/+/Profile
  2. Secondary Sidebar (260px): 선택된 카테고리의 상세 리스트
  3. Main Content (flex): 선택된 항목의 상세 내용
  4. Right Panel (400px): 스레드/검색 결과, 토글 가능
  5. Right Panel은 Main Content 폭을 줄여서 표시 (오버레이 아님)
```

### 2.2 Slack 스레드 패널 상세 구조

> **근거**: Slack Design "Threads in Slack, a long design journey (Part 1 & 2)"

```
Slack Thread Panel 상세 분석:

┌─────────────────────────────────────┐
│ ← Thread   #channel-name      [✕]  │  ← 뒤로/닫기
├─────────────────────────────────────┤
│                                     │
│ 👤 User A  10:58 AM           [⋯]  │  ← 원본 메시지 (부모)
│ Original message text               │     호버 시 액션 아이콘
│ including @mentions and links       │
│                                     │
│ ── N replies ────────────────────── │  ← 답글 구분선
│                                     │
│ 👤 User B  11:05 AM           [⋯]  │  ← 답글 1
│ Reply text                          │
│   👍 2  ❤️ 1                       │  ← 인라인 리액션
│                                     │
│ 👤 User C  11:27 AM           [⋯]  │  ← 답글 2
│ Reply text                          │
│   👍 1                              │
│                                     │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ Reply...                        │ │  ← 답글 컴포저
│ │                                 │ │
│ ├─────────────────────────────────┤ │
│ │ [+] [Aa] [😊] [@] [⋯]    [▶] │ │  ← 서식/이모지/멘션/전송
│ └─────────────────────────────────┘ │
│ ☐ Also send to #channel            │  ← 채널에도 전송 옵션
└─────────────────────────────────────┘

핵심 UX 원칙:
  • 스레드는 메인 채널을 가리지 않고 우측 패널에 표시
  • 부모 메시지가 패널 상단에 항상 고정 표시
  • "N replies" 구분선으로 부모/답글 시각 분리
  • 각 메시지에 호버 시 액션 메뉴 (이모지, 답글, 더보기)
  • 리액션은 메시지 하단에 인라인 배지로 표시
  • 답글 컴포저에 서식/이모지/멘션 풀 기능
  • "Also send to #channel" 옵션 (KanFlow: 활동 로그에 표시 옵션)
```

### 2.3 Slack 메시지 호버 액션

```
Slack 메시지 호버 액션 패턴:

평상시:
  👤 User  10:58 AM
  Message text here

호버 시:
  👤 User  10:58 AM       [😊] [💬] [↗] [📌] [⋯]
  Message text here        ↑     ↑    ↑    ↑    ↑
                          이모지 답글 공유  핀  더보기

액션 바 위치: 메시지 우상단에 플로팅
배경: 메시지 행에 subtle highlight (배경색 변경)
전환: 150ms fade-in

KanFlow 적용:
  카드 호버  → [✏️] [👤] [🏷️] [📅] [⋯]  (편집/담당자/라벨/마감일/더보기)
  코멘트 호버 → [😊] [💬] [📌] [⋯]       (이모지/답글/핀/더보기)
```

---

## 3. 전체 레이아웃 아키텍처

### 3.1 KanFlow 4패널 레이아웃

```
KanFlow 리디자인 전체 레이아웃:

┌────┬──────────────┬────────────────────────────┬──────────────────┐
│    │              │                            │                  │
│ 1  │     2        │          3                 │       4          │
│    │              │                            │                  │
│ N  │  Board       │   Main Content             │  Detail Panel    │
│ A  │  Sidebar     │                            │  (Slide)         │
│ V  │              │   Kanban / List /           │                  │
│    │  ⭐ 즐겨찾기  │   Calendar / Timeline      │  Card Detail     │
│ B  │  ▼ Starred   │                            │  Thread View     │
│ A  │    보드 A     │                            │  Activity Feed   │
│ R  │    보드 B     │   ┌────┐ ┌────┐ ┌────┐    │  Search Result   │
│    │              │   │카드│ │카드│ │카드│    │                  │
│    │  📋 보드 목록  │   └────┘ └────┘ └────┘    │                  │
│ I  │  ▼ 워크스페이스│                            │                  │
│ C  │    보드 C     │   ┌────┐ ┌────┐           │  ── Comments ──  │
│ O  │    보드 D     │   │카드│ │카드│           │  👤 User (time)  │
│ N  │    보드 E     │   └────┘ └────┘           │  "comment text"  │
│ S  │              │                            │  👍 2  ❤️ 1     │
│    │  🕐 최근      │                            │                  │
│    │    보드 F     │   + 카드 추가               │  ┌────────────┐  │
│    │              │                            │  │ Reply...   │  │
│ +  │              │                            │  │[+][Aa][😊] │  │
│ 👤 │ 팀 멤버 상태  │                            │  └────────────┘  │
│    │ 🟢김 🏖️이   │                            │                  │
└────┴──────────────┴────────────────────────────┴──────────────────┘
 56px    240px              flexible                  420px (토글)

레이아웃 규칙:
  • 1영역 (Nav Bar): 56px 고정, 축소 불가
  • 2영역 (Board Sidebar): 240px 기본, 160~360px 리사이즈 가능, 접기 가능 → 0px
  • 3영역 (Main Content): flex-grow: 1, 최소 480px
  • 4영역 (Detail Panel): 420px 기본, 320~560px 리사이즈, 토글(열기/닫기)
  • 4영역 닫힘 시: 3영역이 전체 잔여 폭 차지
  • 4영역 열림 시: 3영역 폭이 줄어듦 (오버레이가 아닌 push 방식)
```

### 3.2 패널 전환 상태 다이어그램

```
패널 상태 전이:

State A: 풀 보드 뷰 (기본)
┌────┬──────────┬───────────────────────────────────────────┐
│ 1  │    2     │              3 (full width)               │
└────┴──────────┴───────────────────────────────────────────┘

State B: 카드 디테일 열림
┌────┬──────────┬──────────────────────┬────────────────────┐
│ 1  │    2     │     3 (shrunk)       │    4 (card)        │
└────┴──────────┴──────────────────────┴────────────────────┘

State C: 사이드바 접힌 + 카드 디테일
┌────┬─────────────────────────────────┬────────────────────┐
│ 1  │          3 (expanded)           │    4 (card)        │
└────┴─────────────────────────────────┴────────────────────┘

State D: 사이드바 접힌 + 풀 보드 뷰
┌────┬──────────────────────────────────────────────────────┐
│ 1  │                    3 (max width)                     │
└────┴──────────────────────────────────────────────────────┘

State E: 스레드 전용 뷰 (4영역 내 스레드 탭)
┌────┬──────────┬──────────────────────┬────────────────────┐
│ 1  │    2     │     3 (shrunk)       │  4 (thread view)   │
└────┴──────────┴──────────────────────┴────────────────────┘

전환 트리거:
  A → B: 보드 뷰에서 카드 클릭
  B → A: 디테일 패널 닫기 (✕ 또는 Esc)
  B → E: 디테일 패널 내 코멘트의 "답글" 클릭
  A → D: 사이드바 접기 (B 키)
  모든 상태 전환: 300ms ease-in-out 애니메이션
```

### 3.3 기존 모달 vs 새 패널 비교

```
기존 (FRD §4.2): 풀스크린 모달
──────────────────────────────────
┌──────────────────────────────┐
│         보드 뷰 (가려짐)       │
│  ┌────────────────────────┐  │
│  │    카드 상세 모달        │  │
│  │    (화면 80% 차지)      │  │
│  │                        │  │
│  │    보드 뷰를 볼 수 없음  │  │
│  │                        │  │
│  └────────────────────────┘  │
└──────────────────────────────┘
❌ 보드 맥락 상실
❌ 카드 간 전환: 닫기 → 클릭 → 열기
❌ 드래그앤드롭 불가 (모달이 가림)


리디자인: 우측 슬라이드 패널
──────────────────────────────────
┌──────────────────┬───────────┐
│                  │           │
│   보드 뷰        │ 카드 상세  │
│   (계속 보임)     │ 패널      │
│                  │           │
│   다른 카드 클릭  │ 즉시 전환  │
│   가능           │           │
│                  │           │
│   드래그앤드롭    │ 코멘트     │
│   가능           │ 스레드     │
│                  │           │
└──────────────────┴───────────┘
✅ 보드 맥락 유지
✅ 카드 간 전환: 다른 카드 클릭만
✅ 드래그앤드롭 보드에서 가능
✅ 코멘트 스레드 패널 내 표시
```

---

## 4. 내비게이션 사이드바 (1영역)

### 4.1 구조

> **근거**: Slack 2025의 Primary Navigation Bar - Home, DMs, Activity, Later, More, +, Profile 아이콘 구조. 칸반 보드 맥락에 맞게 재구성.

```
내비게이션 사이드바 (56px 고정):

┌──────┐
│  🏠  │  Home (보드 목록, 기본 뷰)
│      │
│  🔍  │  Search (전체 검색)
│      │
│  🔔  │  Activity (멘션, 스레드, 변경 알림)
│  ●3  │  → 읽지 않은 알림 배지
│      │
│  ⭐  │  Bookmarks (내 북마크 카드)
│      │
│  📊  │  Dashboard (분석/리포팅)
│      │
│      │
│      │
│      │
│      │  ← 빈 공간 (스페이서)
│      │
│      │
│  ＋  │  Create (보드/카드/워크스페이스 생성)
│      │
│ 👤🟢│  Profile + 온라인 상태
│      │  → 클릭: 프로필, 상태 설정, 설정, 로그아웃
└──────┘

아이콘 스타일:
  • 24x24px 아이콘, 아이콘 간격 8px
  • 선택된 항목: 좌측 3px 인디케이터 바 + 배경 하이라이트
  • 호버: 툴팁 (우측으로 표시, 200ms 딜레이)
  • Activity 아이콘: 읽지 않은 알림 수 배지 (빨간 점 또는 숫자)
  • Profile: 사용자 아바타 32x32, 우하단에 상태 이모지 또는 온라인 점
```

### 4.2 각 뷰별 동작

```
Home (🏠):
  → 2영역: 보드 사이드바 (즐겨찾기, 보드 목록, 최근)
  → 3영역: 선택된 보드의 칸반/리스트/캘린더 뷰

Search (🔍):
  → 2영역: 검색 입력 + 필터 옵션
  → 3영역: 검색 결과 리스트
  → 4영역: 선택된 결과의 카드 상세

Activity (🔔):
  → 2영역: Activity 리스트 (멘션/스레드/리액션/마감 알림)
  → 3영역: 선택된 알림의 원본 카드 뷰
  → 탭: [전체] [멘션] [스레드] [마감일]

Bookmarks (⭐):
  → 2영역: 북마크된 카드 리스트 (보드별 그룹)
  → 3영역: 선택된 카드의 보드 뷰 (해당 카드 하이라이트)

Dashboard (📊):
  → 2영역: 보드 선택 드롭다운
  → 3영역: CFD, 사이클타임, 처리량 등 차트 뷰
```

---

## 5. 보드 사이드바 (2영역)

### 5.1 구조

> **근거**: Slack의 Secondary Sidebar - Unreads, Threads, Drafts & sent, 그리고 Channels/DMs/Apps 섹션의 접기/펼치기 패턴

```
보드 사이드바 (240px 기본):

┌─────────────────────────────┐
│ 🏢 워크스페이스명        [▾] │  ← 워크스페이스 전환 드롭다운
├─────────────────────────────┤
│                             │
│ ▼ ⭐ 즐겨찾기           (3) │  ← 접기/펼치기 섹션
│   📋 Sprint 3 보드          │     선택된 보드: 배경 하이라이트
│   📋 버그 트래킹             │     호버: subtle 배경색
│   📋 Q1 로드맵              │
│                             │
│ ▼ 📋 보드 목록          (8) │  ← 접기/펼치기 섹션
│   📋 Sprint 3 보드          │
│   📋 버그 트래킹             │
│   📋 Q1 로드맵              │
│   📋 디자인 시스템            │
│   📋 인프라 개선             │
│   📋 고객 피드백             │
│   📋 온보딩 프로세스          │
│   📋 마케팅 캠페인            │
│                             │
│ ▼ 🕐 최근               (3) │  ← 최근 접근 보드 자동 정렬
│   📋 Sprint 3 보드          │
│   📋 버그 트래킹             │
│   📋 Q1 로드맵              │
│                             │
├─────────────────────────────┤
│ 👥 팀 멤버                   │  ← Slack Presence 패턴
│ 🟢 김개발                   │     온라인 상태 + 커스텀 상태
│ 🟢 이디자인 🎯 집중 모드     │
│ 🟡 박매니저 📍 회의 중       │
│ ⚫ 최주니어                  │
│                             │
│ [+ 보드 만들기]              │  ← 하단 고정 버튼
└─────────────────────────────┘

섹션 동작:
  • 섹션 헤더 클릭 → 접기/펼치기 토글
  • 섹션 헤더 호버 → [+] 버튼 표시 (보드 추가)
  • 보드 항목 우클릭 → 컨텍스트 메뉴 (즐겨찾기, 복제, 아카이브, 삭제)
  • 보드 항목 드래그 → 섹션 간 이동 (커스텀 섹션 지원)
  • 보드명 좌측: 보드 배경색 인디케이터 점 (4px)
```

### 5.2 사이드바 접기

```
접기 버튼: 2영역 우상단 [«] 아이콘 또는 키보드 [B]

접힌 상태 (0px):
  • 2영역 완전 숨김
  • 3영역이 1영역 바로 우측으로 확장
  • 1영역 Home(🏠) 아이콘 호버 시 2영역이 오버레이로 임시 표시
  • 오버레이에서 보드 선택 후 자동 닫힘

펼치기: 1영역 Home(🏠) 더블클릭 또는 [B] 키
```

---

## 6. 메인 콘텐츠 영역 (3영역)

### 6.1 보드 헤더

```
보드 헤더 (3영역 상단 고정):

┌────────────────────────────────────────────────────────────────────┐
│ 📋 Sprint 3 보드  [⭐] [🔗 공유]                  [👤+3] [🔔] [⚙] │
│                                                                    │
│ [칸반] [리스트] [캘린더] [타임라인] [대시보드]    [🔍 검색] [⊞ 필터] │
│                                                                    │
│ 📢 이번 스프린트 목표: 인증 모듈 완성, 마감 03-07            [▼ 접기]│
└────────────────────────────────────────────────────────────────────┘

상단 행:
  • 보드 제목 (클릭 시 인라인 편집)
  • [⭐] 즐겨찾기 토글
  • [🔗 공유] 공유 링크 생성
  • [👤+3] 현재 보드 온라인 사용자 (아바타 스택)
  • [🔔] 보드 알림 설정
  • [⚙] 보드 설정 (라벨, 템플릿, Webhook, 자동화 등)

하단 행:
  • 뷰 모드 탭: 칸반/리스트/캘린더/타임라인/대시보드
  • [🔍 검색] 보드 내 카드 검색 (인라인 확장)
  • [⊞ 필터] 필터 드롭다운 (라벨/담당자/마감일/우선순위)
  • 활성 필터 → 필터 바에 태그로 표시 + [✕ 필터 해제]

공지 배너 (선택적):
  • 보드 관리자가 설정한 공지 (마크다운)
  • [▼ 접기] 로 최소화, 접혀도 📢 아이콘으로 존재 표시
```

### 6.2 칸반 뷰 (기본)

```
칸반 뷰 (3영역 본문):

┌─── To Do (3/5) ────┬─── In Progress (2/3) ─┬─── Review ────┬─── Done ──────┐
│                    │ ⚠️ WIP 2/3             │              │               │
│ ┌────────────────┐ │ ┌────────────────────┐ │              │ ┌───────────┐ │
│ │ 🔴 KF-042      │ │ │ 🟠 KF-045          │ │              │ │ KF-041    │ │
│ │ 사용자 인증     │ │ │ 프론트 컴포넌트     │ │              │ │ DB 설계   │ │
│ │ 🟣🔵  👤김 👤이│ │ │ 🟣  👤박           │ │              │ │ ✅ 완료   │ │
│ │ ▓▓▓░░ 2/5  📅⚠ │ │ │ 📅 03-01           │ │              │ └───────────┘ │
│ │  💬3  📎2      │ │ └────────────────────┘ │              │ ┌───────────┐ │
│ └────────────────┘ │ ┌────────────────────┐ │              │ │ KF-039    │ │
│ ┌────────────────┐ │ │ KF-046             │ │              │ │ API 스펙  │ │
│ │ KF-048         │ │ │ 테스트 작성         │ │              │ │ ✅ 완료   │ │
│ │ 코드 리뷰      │ │ │ 👤미할당           │ │              │ └───────────┘ │
│ │ 👤미할당       │ │ └────────────────────┘ │              │               │
│ └────────────────┘ │                        │              │               │
│                    │                        │              │               │
│ [+ 카드 추가]      │ [+ 카드 추가]           │ [+ 카드 추가] │               │
└────────────────────┴────────────────────────┴──────────────┴───────────────┘

카드 미리보기 정보 (기존 FRD CD-020 유지):
  • 카드 번호 (KF-042)
  • 우선순위 색상 인디케이터 (좌측 3px 바)
  • 제목
  • 라벨 (색상 칩)
  • 담당자 아바타 (최대 3개)
  • 서브태스크 진행률 (▓▓▓░░ 2/5) ← 추가 기능
  • 마감일 (📅 + 상태 색상) 
  • 코멘트 수 (💬3), 첨부파일 수 (📎2)

카드 클릭 동작 (변경됨):
  기존: 풀스크린 모달 오픈
  리디자인: 4영역 디테일 패널 슬라이드 오픈
```

### 6.3 카드 호버 액션 (Slack 메시지 호버 패턴)

```
카드 호버 시:

평상시:
┌────────────────┐
│ KF-042         │
│ 사용자 인증     │
│ 🟣🔵  👤김     │
└────────────────┘

호버 시:
┌────────────────────────────┐
│ KF-042     [✏️][👤][📅][⋯]│  ← 호버 액션 바 (우상단 플로팅)
│ 사용자 인증                │     배경: 카드 hover 색상 변경
│ 🟣🔵  👤김                │
└────────────────────────────┘

호버 액션 아이콘:
  [✏️] 제목 인라인 편집 (카드를 열지 않고)
  [👤] 담당자 빠른 할당 (드롭다운)
  [📅] 마감일 빠른 설정 (날짜 피커)
  [⋯] 더보기 메뉴:
       → 라벨 변경
       → 우선순위 변경
       → 복사 / 이동
       → 아카이브
       → 삭제

핵심 원칙 (Slack 호버 액션과 동일):
  • 액션 바는 카드 위에 플로팅 (카드 콘텐츠를 밀지 않음)
  • 150ms fade-in 애니메이션
  • 카드 배경색 subtle 변경으로 호버 상태 표시
  • 액션 클릭 시 해당 속성만 변경 (디테일 패널 열지 않음)
```

---

## 7. 우측 디테일 패널 (4영역)

### 7.1 카드 상세 디테일 패널

> **근거**: 기존 FRD §4.2의 카드 상세 모달 레이아웃을 우측 패널에 재배치. Slack의 Thread Panel + Linear의 Issue Detail Panel 패턴 결합.

```
카드 상세 디테일 패널 (420px):

┌─────────────────────────────────────────┐
│ ← 보드명 > 컬럼명            [↗] [✕]   │  ← 헤더
├─────────────────────────────────────────┤
│                                         │
│ 📋 KF-042                              │  ← 카드 번호
│ ┌─────────────────────────────────────┐ │
│ │ 사용자 인증 구현 [인라인 편집 가능]   │ │  ← 제목
│ └─────────────────────────────────────┘ │
│                                         │
│ ── 속성 (Compact Grid) ──               │  ← 속성 영역
│ 상태       │ In Progress               │
│ 담당자     │ 👤김개발  👤이디자인  [+]  │
│ 라벨       │ 🟣버그  🔵기능  [+]       │
│ 우선순위   │ 🔴 Critical               │
│ 마감일     │ 📅 03-01 ⚠️ (D-5)        │
│ 시작일     │ 📅 02-20                  │
│ 예상시간   │ 8h                        │
│ 실제시간   │ 5h                        │
│ 태그       │ #API #인증  [+]           │
│                                         │
│ ── 연결된 카드 ──                        │
│ → KF-039 (blocks)  ✅ Done             │
│ ← KF-045 (blocked by)  🔄 In Prog     │
│ [+ 연결 추가]                           │
│                                         │
│ ── 액션 ──                              │
│ [이동 ▾] [복사] [아카이브] [삭제]        │
│ [공유 링크] [템플릿으로 저장]            │
├─────────────────────────────────────────┤
│                                         │
│ [설명] [서브태스크] [체크리스트]          │  ← 탭 전환
│ [첨부파일] [코멘트] [활동로그]            │
│                                         │
│ ── 설명 (선택된 탭) ──                   │
│ ┌─────────────────────────────────────┐ │
│ │ ## 구현 요구사항                      │ │
│ │ - JWT + Refresh Token               │ │
│ │ - 만료 시 자동 갱신                   │ │
│ │                                     │ │
│ │ :::callout[warn]                    │ │
│ │ 운영 DB 직접 접근 금지               │ │
│ │ :::                                 │ │
│ │                                     │ │
│ │ ```typescript                       │ │
│ │ async validateUser(dto: LoginDto)   │ │
│ │ ```                                 │ │
│ └─────────────────────────────────────┘ │
│ [편집]                                  │
│                                         │
└─────────────────────────────────────────┘

헤더 아이콘:
  [↗] 새 창으로 열기 (풀페이지 카드 뷰, Slack의 "Open in new window")
  [✕] 패널 닫기 (Esc 키와 동일)
  ← 뒤로: 패널 내 내비게이션 히스토리 (스레드 → 카드로 복귀)
```

### 7.2 탭 상세 콘텐츠

```
탭 구성 (카드 상세 패널 하단):

[설명]       카드 설명 (Tiptap 에디터, 편집/미리보기 토글)
[서브태스크]  서브태스크 목록 + 진행률 (ST-001~004)
[체크리스트]  체크리스트 목록 + 진행률 (CK-001~009)
[첨부파일]   첨부파일 목록 + 업로드 영역 (AF-001~006)
[코멘트]     코멘트 + 스레드 (TH-001~003, 핵심 변경)
[활동로그]   활동 이력 시간순 (AL-001~004)

각 탭 우측: 배지 카운트 표시
  예: [코멘트 5] [서브태스크 2/5] [첨부파일 3]
```

---

## 8. 스레드 패널 상세 설계

### 8.1 코멘트 탭 (Slack Thread 패턴 완전 적용)

> **근거**: Slack의 Thread 디자인 결정 과정에서 가장 중요한 결론 — "스레드를 우측 사이드바에 표시하고, 채널 메시지 흐름에서 답글을 분리하는 것이 가장 효과적" (Slack Design, "Threads in Slack Part 2")

```
코멘트 탭 - 스레드 통합 뷰:

┌──────────────────────────────────────────┐
│ [코멘트 8] [활동로그]                      │
│                                          │
│ 📌 고정된 항목 (2)                   [▲] │
│ ┌──────────────────────────────────────┐ │
│ │ 👤 박매니저 (02-20)           [해제] │ │
│ │ "JWT + Refresh Token 로테이션 최종"  │ │
│ ├──────────────────────────────────────┤ │
│ │ 👤 이디자인 (02-18)           [해제] │ │
│ │ "최종 확정 목업: login-final.png"    │ │
│ └──────────────────────────────────────┘ │
│                                          │
│ ── 코멘트 ──                             │
│                                          │
│ 👤 김개발  02-18 14:30    [😊][💬][📌][⋯]│ ← 호버 시 표시
│ API 인증 방식을 JWT에서 Session으로       │
│ 변경하는 건 어떨까요?                     │
│ @이디자인 의견 부탁드립니다               │
│   👍 2  💡 1                             │ ← 인라인 리액션
│   ┌──────────────────────────────┐      │
│   │ 💬 3개의 답글  최신: 박매니저  │      │ ← 스레드 요약
│   │ "JWT로 가되 Refresh Token..." │      │    (접힌 상태)
│   └──────────────────────────────┘      │
│                    ↑ 클릭 시 스레드 열기  │
│                                          │
│ 👤 이디자인  02-18 15:30  [😊][💬][📌][⋯]│
│ 목업 첨부합니다. 피드백 부탁드립니다       │
│ 📎 login-mockup-v2.png [미리보기]        │
│   💬 2개의 답글                          │
│                                          │
│ 👤 최주니어  02-19 09:15  [😊][💬][📌][⋯]│
│ 테스트 코드 작성 시작합니다               │
│                                          │
│ 👤 김개발  02-20 10:00    [😊][💬][📌][⋯]│
│ @박매니저 리뷰 요청드립니다               │
│ 구현 완료하였습니다.                      │
│                                          │
├──────────────────────────────────────────┤
│ ┌──────────────────────────────────────┐ │
│ │ 코멘트 입력...                       │ │ ← 리치 컴포저
│ │                                      │ │
│ ├──────────────────────────────────────┤ │
│ │ [＋] [Aa] [😊] [@] [⋯]        [▶]  │ │
│ └──────────────────────────────────────┘ │
└──────────────────────────────────────────┘
```

### 8.2 스레드 펼침 뷰 (인패널 전환)

```
스레드 "3개의 답글" 클릭 시 → 패널 내 스레드 뷰로 전환:

┌──────────────────────────────────────────┐
│ ← Thread   KF-042                  [✕]  │ ← 뒤로 = 코멘트 탭 복귀
│                                          │
│ [Comments 3]  [Related Threads 1]        │ ← 탭 (Slack 패턴)
│                                          │
│ 👤 김개발  02-18 14:30                   │ ← 부모 코멘트 (고정)
│ API 인증 방식을 JWT에서 Session으로       │
│ 변경하는 건 어떨까요?                     │
│ @이디자인 의견 부탁드립니다               │
│   👍 2  💡 1                             │
│                                          │
│ ── 3 replies ─────────────────────────── │ ← Slack 스타일 구분선
│                                          │
│ 👤 이디자인  14:45          [😊][💬][⋯]  │
│ 세션은 스케일링 이슈가 있어서             │
│ JWT 유지가 좋을 것 같습니다               │
│                                          │
│ 👤 김개발  14:52            [😊][💬][⋯]  │
│ Redis 세션 스토어를 쓰면                  │
│ 스케일링 문제는 해결됩니다                │
│   👍 1                                   │
│                                          │
│ 👤 박매니저  15:10          [😊][💬][⋯]  │
│ JWT로 가되 Refresh Token 로테이션         │
│ 적용합시다                               │
│   👍 3  🎉 1                             │
│                                          │
├──────────────────────────────────────────┤
│ ┌──────────────────────────────────────┐ │
│ │ Reply...                             │ │ ← 답글 컴포저
│ │                                      │ │
│ ├──────────────────────────────────────┤ │
│ │ [＋] [Aa] [😊] [@] [⋯]        [▶]  │ │
│ └──────────────────────────────────────┘ │
│ ☐ 활동 로그에도 표시                      │ ← Slack의 "Also send to"
└──────────────────────────────────────────┘

Related Threads 탭:
  같은 카드의 다른 스레드 목록 표시
  → 빠른 스레드 간 전환
```

### 8.3 코멘트/스레드 상호작용 흐름

```
전체 코멘트/스레드 인터랙션 플로우:

[보드 뷰에서 카드 클릭]
     │
     ▼
[디테일 패널 열림 → 기본: 설명 탭]
     │
     ▼ [코멘트 탭 클릭]
[코멘트 리스트 표시]
  ├── 고정된 코멘트 (상단)
  ├── 일반 코멘트 (시간순)
  │    ├── 스레드 없는 코멘트: 단독 표시
  │    └── 스레드 있는 코멘트: 접힌 요약 표시
  │         │ "N개의 답글" 클릭
  │         ▼
  │    [스레드 뷰로 패널 내 전환]
  │    ├── 부모 코멘트 (상단 고정)
  │    ├── 답글 리스트 (시간순)
  │    ├── 답글 컴포저
  │    └── [← 뒤로] 클릭 → 코멘트 리스트 복귀
  │
  └── 하단: 새 코멘트 컴포저 (항상 표시)

호버 액션 (각 코멘트/답글):
  [😊] → 이모지 리액션 선택 피커
  [💬] → 답글 시작 (스레드 뷰로 전환 + 컴포저 포커스)
  [📌] → 코멘트 고정/해제
  [⋯] → 더보기: 편집, 삭제, 링크 복사
```

---

## 9. 메시지 컴포저 설계

### 9.1 Slack 스타일 리치 컴포저

> **근거**: Slack 메시지 컴포저의 핵심 — 하단 고정, 툴바 아이콘, 서식/이모지/멘션/첨부 통합

```
리치 컴포저 상세 레이아웃:

┌─────────────────────────────────────────────────┐
│ ┌─────────────────────────────────────────────┐ │
│ │                                             │ │
│ │  코멘트를 입력하세요...                       │ │  ← 텍스트 영역
│ │  (마크다운 + 슬래시 명령 지원)                │ │     자동 높이 증가
│ │                                             │ │     최소 1줄, 최대 8줄
│ │  @김개발 여기서 멘션 가능                    │ │     (이후 스크롤)
│ │                                             │ │
│ ├─────────────────────────────────────────────┤ │
│ │ [＋] [Aa] [😊] [@] [📎] [⋯]          [▶]  │ │  ← 툴바
│ └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘

툴바 아이콘 상세:

[＋] 블록 추가 (슬래시 명령 트리거)
     ┌──────────────────┐
     │ /heading         │
     │ /toggle          │
     │ /callout         │
     │ /code            │
     │ /table           │
     │ /checklist       │
     │ /divider         │
     └──────────────────┘

[Aa] 서식 토글
     ┌────────────────────────────────────────┐
     │ [B] [I] [S] [🔗] [</>] [❝] [1.] [•]  │
     │ Bold Ital Strike Link Code Quote OL UL │
     └────────────────────────────────────────┘

[😊] 이모지 피커
     ┌────────────────────────────────┐
     │ 🔍 이모지 검색...              │
     │ 😀😃😄😁😆😅🤣😂🙂🙃      │
     │ 최근: 👍❤️🎉✅🔥             │
     │ [사람] [자연] [음식] [활동]...  │
     └────────────────────────────────┘

[@] 멘션
     ┌────────────────────────────────┐
     │ 🔍 사용자 검색...              │
     │ 👤 김개발                      │
     │ 👤 이디자인  🎯 집중 모드       │
     │ 👤 박매니저  📍 회의 중         │
     │ 👤 최주니어                    │
     └────────────────────────────────┘
     ↑ 사용자 상태가 드롭다운에 표시됨

[📎] 파일 첨부
     → 파일 선택 다이얼로그 또는 클립보드 붙여넣기
     → 첨부된 파일은 텍스트 영역 상단에 미리보기 표시

[⋯] 더보기
     → 코드 블록 삽입
     → 테이블 삽입
     → 구분선

[▶] 전송 (Enter 키와 동일)
    Shift+Enter = 줄바꿈
    Enter = 전송
```

### 9.2 멘션 자동완성

```
멘션 자동완성 동작:

텍스트 영역에 "@" 입력 시:

  @ki|                          ← 입력 중
  ┌────────────────────────────┐
  │ 👤 김개발  🟢 온라인        │  ← 매칭 결과
  │    @kimdev                  │
  └────────────────────────────┘

  @김|
  ┌────────────────────────────┐
  │ 👤 김개발  🟢 온라인        │
  │    @kimdev                  │
  └────────────────────────────┘

Enter 또는 클릭으로 선택:
  → "@김개발 " 삽입 (하이라이트 표시, 파란색 배경)
  → 멘션 대상에게 알림 트리거
```

---

## 10. 호버 액션 & 인터랙션

### 10.1 공통 호버 패턴

> **근거**: Slack의 "메시지 위에 마우스를 올리면 우측 상단에 액션 아이콘이 나타나는 패턴"은 Slack의 가장 핵심적인 인터랙션 패턴이다. 이를 KanFlow의 카드, 코멘트, 체크리스트 항목 등 모든 인터랙티브 요소에 적용한다.

```
호버 액션 공통 규칙:

1. 위치: 대상 요소의 우상단에 플로팅
2. 표시 타이밍: 호버 150ms 후 fade-in (애니메이션 duration: 150ms)
3. 배경: 대상 요소에 subtle background highlight (opacity 0.04 black)
4. 사라짐: 마우스 벗어나면 즉시 fade-out (100ms)
5. 액션 바 자체에 마우스가 있으면 유지됨
6. 모바일: long-press → 컨텍스트 메뉴로 대체

요소별 호버 액션:

카드 (보드 뷰):
  [✏️ 편집] [👤 담당자] [📅 마감일] [⋯ 더보기]

코멘트:
  [😊 리액션] [💬 답글] [📌 고정] [⋯ 더보기]

체크리스트 항목:
  [👤 담당자] [📅 마감일] [⋯ 더보기]

서브태스크:
  [→ 열기] [👤 담당자] [⋯ 더보기]

첨부파일:
  [⬇ 다운로드] [🖼️ 커버 설정] [🗑️ 삭제]

활동 로그:
  [→ 카드 열기] (변경 대상 카드로 이동)
```

### 10.2 이모지 리액션 인라인 표시

```
이모지 리액션 표시 (Slack 패턴):

코멘트 하단에 인라인 배지:

  👤 김개발  14:30
  API 인증 방식을 JWT에서 Session으로 변경하는 건 어떨까요?
  
  ┌─────┐ ┌─────┐ ┌─────┐ ┌───┐
  │ 👍 3│ │ 💡 2│ │ 🎉 1│ │ + │  ← 리액션 추가 버튼
  └─────┘ └─────┘ └─────┘ └───┘

리액션 배지 동작:
  • 배지 클릭 → 내가 이 이모지를 추가/제거 토글
  • 내가 추가한 리액션: 배경 하이라이트 (파란 테두리)
  • 배지 호버 → 해당 이모지를 추가한 사용자 목록 툴팁
  • [+] 클릭 → 이모지 피커 열기
  • 리액션 0개 → 배지 영역 숨김 (호버 시 [😊] 버튼만 표시)
```

---

## 11. 알림 및 Activity 뷰

### 11.1 Activity 뷰 (1영역 🔔 클릭)

> **근거**: Slack의 Activity 뷰 — 멘션, 스레드, 리액션, 앱 알림을 통합

```
Activity 뷰 레이아웃:

┌───┬────────────────────────────────────────────────────────────┐
│   │                                                            │
│ N │  Activity                                                  │
│ A │                                                            │
│ V │  [전체] [멘션] [스레드] [마감일] [할당]                      │
│   │                                                            │
│ B │  ── 오늘 ──                                                │
│ A │                                                            │
│ R │  💬 @김개발 이(가) KF-042에서 멘션함         14:30         │
│   │    "API 스펙 확인 부탁드립니다 @나"                        │
│   │    └ Sprint 3 > In Progress                               │
│   │                                                            │
│ 🔔│  🔄 KF-045가 Review로 이동됨                  13:15        │
│ ●3│    박개발이 이동                                           │
│   │    └ Sprint 3 > Review                                    │
│   │                                                            │
│   │  💬 김개발이 KF-042 스레드에 답글            12:00         │
│   │    "Redis 세션 스토어를 쓰면..."                           │
│   │    └ 내가 참여 중인 스레드                                 │
│   │                                                            │
│   │  ── 어제 ──                                                │
│   │                                                            │
│   │  ⚠️ KF-048 마감일 초과                     02-23          │
│   │    마감: 02-22, 1일 초과                                   │
│   │    └ Sprint 3 > In Progress                               │
│   │                                                            │
│   │  👍 이디자인이 내 코멘트에 👍 리액션        02-23          │
│   │    KF-042: "API 스펙 정리..."                              │
│   │                                                            │
│   │  ...                                                       │
│   │                                                            │
│   │  [모두 읽음 처리]                                          │
│   │                                                            │
└───┴────────────────────────────────────────────────────────────┘

각 알림 항목 클릭:
  → 해당 카드의 디테일 패널이 4영역에 열림
  → 멘션/스레드 알림: 해당 코멘트/스레드로 자동 스크롤
```

---

## 12. 반응형 & 적응형 레이아웃

### 12.1 브레이크포인트별 레이아웃

```
브레이크포인트 정의:

XL (≥1440px): 4패널 동시 표시
  [Nav 56px] [Sidebar 240px] [Main flex] [Detail 420px]

LG (1024-1439px): 3패널 (Detail이 Main 위에 오버레이)
  [Nav 56px] [Sidebar 240px] [Main flex]
  → 카드 클릭 시 Detail이 Main 위에 오버레이 (모달이 아닌 슬라이드)

MD (768-1023px): 2패널 (Sidebar 숨김 기본)
  [Nav 56px] [Main flex]
  → Sidebar: 오버레이로 표시 (햄버거 메뉴)
  → Detail: 전체 화면 (Main 대체)

SM (< 768px): 1패널 (모바일)
  [Bottom Nav] [Content full]
  → Nav → 하단 탭 바로 전환
  → Sidebar → 전체 화면 리스트
  → Main → 전체 화면
  → Detail → 전체 화면 (뒤로 버튼으로 복귀)
```

### 12.2 패널 리사이즈

```
리사이즈 핸들:

  2영역 | 3영역 경계: 드래그로 Sidebar 폭 조절 (160~360px)
  3영역 | 4영역 경계: 드래그로 Detail 패널 폭 조절 (320~560px)

  리사이즈 핸들: 4px 폭, hover 시 6px + 커서 변경 (col-resize)
  더블클릭: 기본 폭으로 복귀

  사용자 설정 폭은 localStorage에 저장 → 세션 간 유지
```

---

## 13. 테마 & 커스터마이징

### 13.1 테마 시스템

> **근거**: Slack의 테마 시스템 — 프리셋 테마 + 커스텀 HEX 색상 지원

```
테마 설정:

프리셋 테마:
  • Light (기본): 밝은 배경, 어두운 텍스트
  • Dark: 어두운 배경, 밝은 텍스트
  • Aubergine (Slack 클래식): 보라색 사이드바
  • Ocean: 블루 톤 사이드바
  • Forest: 그린 톤 사이드바

커스텀 테마 (CSS 변수):
  --nav-bg: #4A154B          (1영역 배경)
  --sidebar-bg: #3F0E40      (2영역 배경)
  --sidebar-text: #FFFFFF    (2영역 텍스트)
  --sidebar-active: #1164A3  (선택된 항목 배경)
  --main-bg: #FFFFFF         (3영역 배경)
  --detail-bg: #F8F8F8       (4영역 배경)
  --accent: #1264A3          (강조 색상, 링크, 버튼)
  --hover: rgba(0,0,0,0.04)  (호버 배경)

Slack 스타일 그라데이션:
  • Sidebar: subtle linear-gradient (Top → Bottom)
  • 딱딱한 단색 대신 미묘한 그라데이션으로 부드러운 느낌
  • 요소 간 경계: 선(border) 대신 elevation과 subtle shadow
```

---

## 14. 기존 FRD 변경 영향 분석

### 14.1 변경되는 기존 FRD 항목

```
영향받는 FRD 항목과 변경 내용:

1. §4.2 카드 상세 모달 레이아웃 → 전면 교체
   기존: 풀스크린 모달 (좌 70% + 우 30%)
   변경: 우측 슬라이드 패널 (420px) + 탭 기반 콘텐츠

2. §4.1 CD-003 카드 상세 모달 → CD-003 카드 디테일 패널
   동작 변경: 모달 팝업 → 우측 패널 슬라이드

3. §4.1 CD-004 카드 제목 편집 → 호버 액션에서 인라인 편집 추가
   기존: 더블클릭 또는 연필 아이콘
   추가: 호버 시 [✏️] 아이콘으로도 인라인 편집

4. §11 CM-001~006 코멘트 → 스레드 통합 UI
   기존: 플랫 코멘트 리스트
   변경: Slack 스타일 스레드 + 호버 액션 + 인라인 리액션

5. §16 NF-001 인앱 알림 → Activity 뷰로 통합
   기존: 헤더 벨 아이콘 + 드롭다운
   변경: 1영역 Activity 아이콘 → 2+3영역 전체 Activity 뷰

6. §10 SF-001 보드 내 검색 → 1영역 Search 뷰 통합
   기존: 보드 헤더 검색 바
   변경: 보드 헤더 검색 유지 + 전체 Search 뷰 추가

7. §17 VW-001~005 보드 뷰 모드 → 3영역 내 탭 전환
   기존: 별도 페이지/라우트
   변경: 보드 헤더 내 탭으로 뷰 모드 전환 (SPA 내 탭)

8. §26 키보드 단축키 → 추가 단축키
   추가: [B] 사이드바 토글, [Esc] 패널 닫기, [←/→] 패널 내 탭 전환
```

### 14.2 새로 추가되는 컴포넌트

```
추가 컴포넌트 목록:

UI 레이아웃 (신규):
  • AppShell (4패널 레이아웃 컨테이너)
  • NavBar (1영역)
  • BoardSidebar (2영역)
  • DetailPanel (4영역)
  • PanelResizeHandle (패널 리사이즈)

인터랙션 (신규):
  • HoverActionBar (호버 시 액션 아이콘)
  • EmojiReactionBadge (인라인 리액션 표시)
  • EmojiPicker (이모지 선택 피커)
  • RichComposer (Slack 스타일 코멘트 입력)
  • MentionAutocomplete (@ 멘션 자동완성)

스레드 (신규):
  • ThreadView (스레드 전체 뷰)
  • ThreadSummary (접힌 스레드 요약)
  • ThreadReplyComposer (스레드 답글 입력)

Activity (신규):
  • ActivityView (통합 알림 뷰)
  • ActivityItem (개별 알림 항목)
  • ActivityFilter (알림 필터 탭)
```

---

## 15. 컴포넌트 트리 & 기술 설계

### 15.1 전체 컴포넌트 트리

```
<AppShell>
  ├── <NavBar>                               ← 1영역 (56px)
  │     ├── <NavIcon icon="home" />
  │     ├── <NavIcon icon="search" />
  │     ├── <NavIcon icon="activity" badge={3} />
  │     ├── <NavIcon icon="bookmarks" />
  │     ├── <NavIcon icon="dashboard" />
  │     ├── <Spacer />
  │     ├── <CreateButton />
  │     └── <UserAvatar status="online" />
  │
  ├── <BoardSidebar>                         ← 2영역 (240px, 토글)
  │     ├── <WorkspaceSwitcher />
  │     ├── <SidebarSection title="즐겨찾기" collapsible>
  │     │     └── <BoardItem />[]
  │     ├── <SidebarSection title="보드 목록" collapsible>
  │     │     └── <BoardItem />[]
  │     ├── <SidebarSection title="최근" collapsible>
  │     │     └── <BoardItem />[]
  │     ├── <TeamPresence>
  │     │     └── <MemberStatus />[]
  │     └── <CreateBoardButton />
  │
  ├── <MainContent>                          ← 3영역 (flex)
  │     ├── <BoardHeader>
  │     │     ├── <BoardTitle editable />
  │     │     ├── <ViewModeTabs />           ← 칸반/리스트/캘린더/...
  │     │     ├── <SearchBar />
  │     │     ├── <FilterBar />
  │     │     └── <OnlineUsers />
  │     │
  │     ├── <BoardAnnouncement collapsible /> ← 공지 배너
  │     │
  │     └── <ViewRenderer>                   ← 선택된 뷰 렌더링
  │           ├── <KanbanView>
  │           │     ├── <Column>[]
  │           │     │     ├── <ColumnHeader />
  │           │     │     ├── <CardPreview>[]   ← 카드 미리보기
  │           │     │     │     └── <HoverActionBar />
  │           │     │     └── <AddCardButton />
  │           │     └── <AddColumnButton />
  │           ├── <ListView />
  │           ├── <CalendarView />
  │           ├── <TimelineView />
  │           └── <DashboardView />
  │
  ├── <PanelResizeHandle />                  ← 3|4 경계 리사이즈
  │
  └── <DetailPanel>                          ← 4영역 (420px, 토글)
        ├── <PanelHeader>
        │     ├── <BackButton />              ← 스레드 → 카드 복귀
        │     ├── <Breadcrumb />
        │     ├── <OpenInNewWindow />
        │     └── <CloseButton />
        │
        ├── <CardDetail>
        │     ├── <CardNumber />
        │     ├── <CardTitle editable />
        │     ├── <PropertyGrid>              ← 속성 그리드
        │     │     ├── <StatusField />
        │     │     ├── <AssigneeField />
        │     │     ├── <LabelField />
        │     │     ├── <PriorityField />
        │     │     ├── <DueDateField />
        │     │     └── <TagField />
        │     ├── <CardLinks />
        │     └── <ActionButtons />
        │
        ├── <ContentTabs>                    ← 탭 전환
        │     ├── Tab: <DescriptionEditor />  ← Tiptap
        │     ├── Tab: <SubtaskList />
        │     ├── Tab: <ChecklistList />
        │     ├── Tab: <AttachmentList />
        │     ├── Tab: <CommentSection>       ← 핵심 변경
        │     │     ├── <PinnedComments />
        │     │     ├── <CommentList>
        │     │     │     └── <CommentItem>[]
        │     │     │           ├── <HoverActionBar />
        │     │     │           ├── <EmojiReactionBadge />[]
        │     │     │           └── <ThreadSummary />
        │     │     └── <RichComposer />
        │     │
        │     └── Tab: <ActivityLog />
        │
        └── <ThreadView>                     ← 스레드 전환 시
              ├── <ThreadHeader />
              ├── <ParentComment />
              ├── <ReplySeparator />
              ├── <ReplyList>
              │     └── <ReplyItem>[]
              │           ├── <HoverActionBar />
              │           └── <EmojiReactionBadge />[]
              ├── <ThreadReplyComposer />
              └── <AlsoSendToActivity />
```

### 15.2 상태 관리 설계

```
Zustand 스토어 구조 (클라이언트 상태):

uiStore:
  ├── sidebarOpen: boolean           (2영역 열림/닫힘)
  ├── sidebarWidth: number           (2영역 폭, px)
  ├── detailPanelOpen: boolean       (4영역 열림/닫힘)
  ├── detailPanelWidth: number       (4영역 폭, px)
  ├── detailPanelView: 'card' | 'thread' | null
  ├── activeCardId: string | null    (현재 선택된 카드)
  ├── activeThreadId: string | null  (현재 열린 스레드)
  ├── activeTab: string              (설명/서브태스크/코멘트 등)
  ├── activeNavView: 'home' | 'search' | 'activity' | 'bookmarks' | 'dashboard'
  └── theme: ThemeConfig

TanStack Query 키 구조 (서버 상태):
  ['boards']                          → 보드 목록
  ['boards', boardId]                 → 보드 상세
  ['boards', boardId, 'cards']        → 카드 목록
  ['cards', cardId]                   → 카드 상세
  ['cards', cardId, 'comments']       → 코멘트 목록
  ['comments', commentId, 'replies']  → 스레드 답글
  ['cards', cardId, 'subtasks']       → 서브태스크
  ['activity']                        → Activity 피드
  ['bookmarks']                       → 북마크 목록
```

### 15.3 CSS 레이아웃 핵심 코드

```css
/* AppShell - 4패널 레이아웃 */
.app-shell {
  display: grid;
  grid-template-columns: 
    56px                              /* 1: Nav Bar */
    var(--sidebar-width, 240px)       /* 2: Board Sidebar */
    1fr                               /* 3: Main Content */
    var(--detail-width, 0px);         /* 4: Detail Panel */
  height: 100vh;
  overflow: hidden;
}

/* Detail Panel 열림 시 */
.app-shell--detail-open {
  --detail-width: 420px;
}

/* Sidebar 닫힘 시 */
.app-shell--sidebar-closed {
  grid-template-columns: 56px 0px 1fr var(--detail-width, 0px);
}

/* 패널 전환 애니메이션 */
.app-shell {
  transition: grid-template-columns 300ms ease-in-out;
}

/* Detail Panel 슬라이드 애니메이션 */
.detail-panel {
  transform: translateX(100%);
  transition: transform 300ms ease-in-out;
}
.detail-panel--open {
  transform: translateX(0);
}

/* 호버 액션 바 */
.hover-action-bar {
  position: absolute;
  top: -16px;
  right: 8px;
  opacity: 0;
  transition: opacity 150ms ease-in;
  background: var(--surface);
  border-radius: 8px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.12);
  padding: 4px;
  display: flex;
  gap: 2px;
}
.hoverable:hover .hover-action-bar {
  opacity: 1;
}

/* 이모지 리액션 배지 */
.reaction-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 12px;
  border: 1px solid var(--border);
  font-size: 12px;
  cursor: pointer;
}
.reaction-badge--active {
  border-color: var(--accent);
  background: var(--accent-bg);
}
```

### 15.4 전체 인터랙션 플로우

```
사용자 시나리오: 카드 코멘트에서 스레드 논의

1. 보드 진입
   → [Nav Home] → [Sidebar에서 보드 선택] → [3영역에 칸반 뷰 표시]

2. 카드 확인
   → 카드 위에 마우스 호버 → 호버 액션 바 표시
   → 카드 클릭 → 4영역 디테일 패널 슬라이드 오픈 (300ms)
   → 3영역 폭이 줄어들며 보드 뷰 유지

3. 코멘트 확인
   → [코멘트] 탭 클릭 → 코멘트 리스트 표시
   → 고정된 코멘트 2개 상단에 표시
   → 코멘트에 마우스 호버 → [😊][💬][📌][⋯] 표시

4. 스레드 진입
   → "3개의 답글" 클릭 → 패널 내 스레드 뷰로 전환
   → 부모 코멘트 상단 고정 + 답글 리스트
   → [← Thread] 헤더에 뒤로 버튼

5. 답글 작성
   → 하단 리치 컴포저에 포커스
   → "@박매니저 " 입력 → 멘션 자동완성
   → 코드 블록 삽입: [＋] → /code
   → [▶] 전송

6. 리액션
   → 다른 답글에 마우스 호버 → [😊] 클릭
   → 이모지 피커에서 👍 선택
   → 인라인 리액션 배지에 "👍 3" 업데이트

7. 복귀
   → [← 뒤로] → 코멘트 리스트 복귀
   → [✕] → 디테일 패널 닫힘 → 보드 뷰 풀 폭 복귀
   → 또는 3영역에서 다른 카드 클릭 → 4영역 즉시 전환
```

---

> **문서 끝**  
> 버전: v1.0 | 작성일: 2026-02-24  
> 핵심 변경: 풀스크린 모달 → 4패널 레이아웃 + 우측 슬라이드 패널  
> Slack 패턴 적용: 3패널 내비게이션, 우측 스레드 패널, 호버 액션, 리치 컴포저, Activity 뷰, 이모지 리액션  
> 영향 범위: FRD 8개 항목 변경, 신규 컴포넌트 15개 추가
